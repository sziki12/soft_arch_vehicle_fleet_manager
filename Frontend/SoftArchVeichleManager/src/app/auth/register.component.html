<form [formGroup]="form" (ngSubmit)="submit()">
    <h2>Register</h2>

    <div class="form-grid">
        <div class="form-group">
            <label>Username</label>
            <input type="text" formControlName="username" placeholder="Username">
            <small class="field-error" *ngIf="submitted && form.controls['username'].invalid">
                Username is required.
            </small>
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" formControlName="password" placeholder="Password">
            <small class="field-error" *ngIf="submitted && form.controls['password'].errors?.['required']">
                Password is required.
            </small>
            <small class="field-error" *ngIf="submitted && form.controls['password'].errors?.['minlength']">
                Password must be at least 6 characters.
            </small>
        </div>
        <div class="form-group">
            <label>Role</label>
            <select formControlName="role">
                <option value="fleet_operator">Fleet operator</option>
                <option value="manufacturer">Manufacturer</option>
            </select>
            <small class="field-error" *ngIf="submitted && form.controls['role'].invalid">
                Please select a role.
            </small>
        </div>
    </div>

    <div class="actions">
        <button type="button" class="ghost-btn" (click)="switchToLogin.emit()">Back to login</button>
        <button type="submit" [disabled]="form.invalid || loading">Register</button>
    </div>

    <p class="success" *ngIf="success">{{ success }}</p>
    <p class="error" *ngIf="error">{{ error }}</p>
</form>
